{% extends 'layouts/base.html' %}
{% load static %}
{% load custom_filters %}
{% load static %}
{% block title %}My Orders{% endblock %}
{% block style %}
<!-- BASE CSS -->
<link rel="stylesheet" href="{% static 'accounts/css/base.css' %}">
<!-- SWIPER CSS -->
<link href="{% static 'swiper/css/swiper-bundle.min.css'%}" rel="stylesheet">
<!-- OUR STYLE -->
<link rel="stylesheet" href="{% static 'base/css/popup.css' %}">
<link rel="stylesheet" href="{% static 'booster/css/booster-orders.css' %}">
<!-- Ranks Colors -->
<link rel="stylesheet" href="{% static 'games/css/ranks-colors.css' %}">
<!-- Toastify -->
<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/toastify-js/src/toastify.min.css">
<!-- popup -->
<!-- <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet"> -->

<style>
  .copy-icon, .toggle-password {
    cursor: pointer;
    font-size: 1em;
    margin-left: 10px;
    padding: 5px;
    border-radius: 3px;
    display: inline-block;
  }

  .copy-icon:hover, .toggle-password:hover {
    color: #F26E3E;
  }

  .copy-icon:focus, .toggle-password:focus {
    outline: none;
  }

  .password-field {
    font-family: 'Courier New', Courier, monospace;
    letter-spacing: 1px;
  }
  .toggle-password-checkbox {
    display: none;
  }

  .toggle-password-label {
    cursor: pointer;
  }

  .toggle-icon {
    font-size: 1.2em;
    margin-left: 5px;
    color: #ffffff80;
  }

  .nothash {
    display: none;
  }

  .toggle-password-checkbox:checked ~ .nothash {
    display: inline;
  }

  .toggle-password-checkbox:checked ~ .password-field {
    display: none;
  }
  .scrollBtn {
          display: none;
      }
      @media only screen and (max-width: 768px) {
          .scrollBtn {
              display: inline-flex;
              margin: 10px;
          }
  }
  .raid-info label{
    color: #FFFFFF80;
  }
  .raid-info div:not(:last-of-type){
    border-bottom: 0.2px solid #1E1814;
    margin-bottom: 6px;
    margin-top: 6px;
  }
       
  
</style>

<style>
  .custom-modal {
    background-color: #433733;
    color: #ffffff; /* Ensures text is readable against the dark background */
  }
  .custom-modal .modal-header, .custom-modal .modal-footer {
    border-color: #433733; /* Removes border color difference */
  }
  .modal-backdrop {
    z-index: 1040 !important;
  }
  .custom-modal {
    z-index: 1050 !important;
  }
</style>
{% endblock %}
{% block container %}
<div class="data">
  {% for order in orders %}
    <div class="customer-ids" id="customer-id{{order.order.order.customer.id}}" data-customer-id="{{ order.order.order.customer.id}}"></div>

    {{order.slug|json_script:"room_slug"}}
    {{order.room.name|json_script:'booster_room_name'}}
    {{request.user.username|json_script:"user"}}
    {{order.order.order.customer.first_name|json_script:"customer_first_name"}}
    {{order.order.order.customer.last_name|json_script:"customer_last_name"}}
    {{request.user.booster.get_image_url|json_script:'booster_image'}}   
  {% endfor %}
</div>
<div class="booster-container">

  <div class="booster-contant">
    <div class="overlay">

      <div class="heading">
        <h1>Orders</h1>
        <p>Scan the orders and claim what suits you</p>
      </div>

      <div class="container roles-container">

        <div class="role-heading d-flex flex-md-row flex-column justify-content-center align-items-center gap-4 mt-4">
          <h3 class="fw-bold fs-2">Service Rules: </h3>
          <button class="btn custom-btn filled" id="read-roles">Read</button>
        </div>
        <div class="roles mt-5 p-md-5 px-1 py-2" id="roles">
          <div class="row">
            <div class="col-xl-4 col-md-6 col-12 px-3 d-md-block d-none">
              <div class="image text-md-start text-center">
                <img src="{% static 'booster/images/roles-img.png' %}" class="img-fluid" alt="Image">
              </div>
            </div>
  
            <div class="col-xl-4 col-md-6 col-0 px-3 mt-md-0 mt-4">
              <div class="general section">
                <h3 class="fw-bold">General</h3>
  
                <div class="instruction">
                  <p>
                    We protect our customers' base, thus direct
                    boosting of our customers comes under ban
                    without a payout.
                  </p>
                  <p>
                    The use of any hacks or scripts on a customer's
                    account will lead to a ban on the service without
                    a payout.
                  </p>
                  <p>
                    Direct contacts with customers outside of the
                    service (and League game client during duo q
                    boosting) are forbidden.
                  </p>
                  <p>
                    In order to complete the order properly, you
                    have to upload a screenshot of the customer's
                    profile, which should be taken after the final game.
                    We need it as a proof to fight against the fraud
                    chargebacks.
                  </p>
                </div>
              </div>
            </div>
  
            <div class="col-xl-4 col-md-6 col-12 px-3 mt-xl-0 mt-4">
              <div class="quality-service section">
                <h3 class="fw-bold">Quality of the Service</h3>
  
                <div class="instruction">
                  <p>
                    To introduce yourself first to the customer
                    and then to ask him, whether he has any
                    questions would be a great start of the
                    conversation and will definitely increase
                    your chances to get 5 stars feedback and
                    the tips when the boost is over.
                  </p>
                  <p>
                    You have to start working on order within
                    15 minutes after you claimed it. You cannot
                    save the orders for later.
                  </p>
                  <p>
                    Stay always online in the service chat
                    during boosting to be in a regular contact
                    with the customer.
                  </p>
                  <p>
                    Warn the customer, if your boosting
                    session is over and inform, when
                    you plan to continue.
                  </p>
                </div>
              </div>
            </div>
  
            <div class="col-md-6 col-12 px-3 mt-xl-0 mt-4">
              <div class="boosting-process section">
                <h3 class="fw-bold">Boosting Process</h3>
  
                <div class="instruction row row-cols-md-2 row-cols-1">
                  <p>
                    Never flame during your games on
                    the customer's account. Causing a
                    ranked restriction or ban on the
                    customer's account will lead to a cash
                    penalty or ban on the service.
                  </p>
                  <div>
                    <p>
                      Never spoil yourself as a booster.
                    </p>
                    <p>
                      Do not chat with the people from
                      the customer's friend list unless you're
                      asked by the customer to do that.
                    </p>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <div class="understand-btn">
            <button class="btn custom-btn filled text-center" id="understand-roles">I Understand</button>
          </div>
        </div>
      </div>

      <div class="container mt-5">
        <h3 class="mb-4">Chat rooms</h3>

        <div class="switch-orders-and-get-more row align-items-center">
  
          <div class="col-md-8 col-12">
            <div class="swiper switch-orders-container">
              <div class="orders-swiper">
                {% if orders %}
                  <div class="swiper-wrapper">
                    {% for order in orders %}
                      <div class="swiper-slide p-4 order-{{order.order.order.id}}">

                        <input type="radio" id="order-{{order.order.order.id}}" data-order="order-{{order.order.order.id}}" name="radio-order" {% if forloop.counter0 == 0 %} checked {% endif %}>

                        <label for="order-{{order.order.order.id}}" class="text-start">
                          ID: {{order.order.order.name}}
                          {% if order.order.customer.is_online %}
                            <p class="status status-online mb-0 mt-2 head-state{{order.order.order.customer.id}}-id" id="head-state{{order.order.order.id}}-id"><span class="online"></span>Online</p>
                          {% else %}
                            <p class="status status-offline mb-0 mt-2 head-state{{order.order.order.customer.id}}-id" id="head-state{{order.order.order.id}}-id"><span class="offline"></span>Offline</p>
                          {% endif %}
                        </label>

                      </div>
                    {% endfor %}
                  
                  </div>
                {% else %}
                  <h3 class="text-white text-center">You Havn't Any Order Yet</h3>
                {% endif %}
              </div>
            </div>
          </div>

          <div class="col-md-4 col-12 mt-md-0 mt-4">
            <a class="btn custom-btn filled fs-md-3 fs-6" href="{% url 'orders.jobs' %}">Get More Orders</a>
          </div>
  
        </div>
        
        <div class="orders-information">
          {% for order in orders %}
            <div class="row justify-content-between my-5 order order-{{order.order.order.id}}" data-order="order-{{order.order.order.id}}" data-slug="{{order.slug}}" data-room="{{order.room.name}}">
              
              <!-- --------------------------- Order Info --------------------------- -->
              <div class="order-info-container row col-xl-4 col-12">
                <div class="col-xl-12 col-lg-6 col-12 pe-xl-0 pe-lg-3 ps-0 pe-0">
                  <div class="account-details">
                    <h4 style="font-weight: 700;">
                      Account Details 
                      <span id="duo-or-solo" class="{% if order.order.order.duo_boosting %}duo{% else %}solo{% endif %}">
                        {% if order.order.order.duo_boosting %} Duo {% else %} Solo {% endif %}
                      </span>
  
                      {% if order.order.order.game_type == 'D' and order.order.order.game_id == 9 %}
                        <span id="ranked-type">
                          {% if order.order.ranked_type == 1 %} 1vs1 {% elif order.order.ranked_type == 2 %} 2vs2 {% else %} 3vs3 {% endif %}
                        </span>
                      {% elif order.order.order.game_type == 'A' and order.order.order.game_id == 6 %}
                        <span id="ranked-type">
                          {% if order.order.is_arena_2vs2 %} 2vs2 {% else %} 3vs3 {% endif %}
                        </span>
                      {% elif order.order.order.game_id == 10 %}
                        <span id="role">
                          {% if order.order.role == 1 %} CORE {% else %} SUPPORT {% endif %}
                        </span>
                      {% elif order.order.order.game_id == 12 %}
                        <span id="role">
                          {% if order.order.role == 1 %} DPS {% elif order.order.role == 2 %} TANK {% else %} SUPPORT {% endif %}
                        </span>
                      {% endif %}
                    </h4>
                  




                    <div class="details pt-2" id="details">
                      <input type="hidden" name="order_id" id="order_id" value="{{order.order.order.id}}">
                      
                      <div class="d-flex justify-content-between align-items-center">
                        <label for="gameName">In Game Name:</label>
                        <div>
                          <span id="gameNameText{{order.order.order.id}}">{{ order.order.order.customer_gamename }}</span>
                          <i class="fas fa-copy copy-icon" data-target="#gameNameText{{order.order.order.id}}"></i>
                        </div>
                      </div>

                      <div class="d-flex justify-content-between align-items-center">
                        <label for="server">Server:</label>
                        <div>
                          <span id="serverText{{order.order.order.id}}">{{ order.order.order.customer_server }}</span>
                          <i class="fas fa-copy copy-icon" data-target="#serverText{{order.order.order.id}}"></i>
                        </div>
                      </div>

                      <div class="d-flex justify-content-between align-items-center">
                        <label for="username">Username:</label>
                        <div>
                          <span id="usernameText{{order.order.order.id}}">{{ order.order.order.customer_username }}</span>
                          <i class="fas fa-copy copy-icon" data-target="#usernameText{{order.order.order.id}}"></i>
                        </div>
                      </div>
                      
                      {% if not order.order.duo_boosting %}
                      <div class="d-flex justify-content-between align-items-center">
                        <label for="password">Password:</label>
                        <div class="password-container">
                          <input type="checkbox" id="togglePassword{{order.order.order.id}}" class="toggle-password-checkbox">
                          <span class="password-field hash">••••••••</span>
                          <span class="nothash" id="passwordText{{order.order.order.id}}">{{ order.order.order.customer_password }}</span>
                          <label for="togglePassword{{order.order.order.id}}" class="toggle-password-label">
                            <i class="fas fa-eye toggle-icon"></i>
                          </label>
                          <i class="fas fa-copy copy-icon" data-target="#passwordText{{order.order.order.id}}"></i>
                        </div>
                      </div>
                      {% endif %}
                      
                      <div class="d-flex justify-content-between align-items-center">
                        <label for="userId">Order ID:</label>
                        <div>
                          <span id="userIdText{{order.order.order.id}}">{{ order.order.order.name }}</span>
                          <i class="fas fa-copy copy-icon" data-target="#userIdText{{order.order.order.id}}"></i>
                        </div>
                      </div>

                      <form action="{% url 'alert.customer' order_id=order.order.order.id %}" method="POST" class="alert-customer-form no-disabled-form">
                        {% csrf_token %}
                        <button type="submit" class="btn alert-customer-btn">Alert Customer</button>
                      </form>

                      <p class="text-center mt-3 mb-0" style="color: #FFFFFF80; font-weight: 300; font-size: 9px">
                        <i class="fa-solid fa-circle-info me-1"></i> Notify the player if there are something wrong with the information
                      </p>
                    </div>






                  </div>
                </div>

                <div class="col-xl-12 col-lg-6 col-12 pe-xl-0 pe-0 ps-0">
                  <div class="order-info {{order.order.order.game.link}}-{% if order.order.order.game_type == 'D' or order.order.order.game_type == 'A' %}{{order.reached_rank.rank_name}}{% elif order.order.order.game_type == 'P' %}{{order.last_rank.rank_name}}{% elif order.order.order.game_type == 'S' %}{{order.current_rank.rank_name}}{% elif order.order.order.game_type == 'T' %}{{order.current_league.rank_name}}{% elif order.order.order.game_type == 'F' %}{{order.reached_rank.rank_name}}{% endif %}">
                    <h4 style="font-weight: 700;">Progress Tracker</h4>
                    <!-- RAID SIMPLE -->
                    {% if order.order.order.game_type == 'R' %}
                    <div class="raid-info">
                      <div class="d-flex justify-content-between">
                        <label>Map:</label>
                        <p>{{order.order.get_map_display}}</p>
                      </div>
                      <div class="d-flex justify-content-between">
                        <label>Bosses:</label>
                        <p>{{order.order.bosses.all.count}} Bosses</p>
                      </div>
                      <div class="d-flex justify-content-between">
                        <label>Loot Priority:</label>
                        <p>{{order.order.loot_priority}}</p>
                      </div>
                      <div class="d-flex justify-content-between">
                        <label>Boost Method:</label>
                        <p>{{order.order.boost_method}}</p>
                      </div>
                    </div>
                    <!-- Button trigger modal -->
                    <button type="button" class="btn complete-order-btn" data-bs-toggle="modal" data-bs-target="#staticBackdrop-{{ order.order.order.id }}">
                      <i class="fa-regular fa-circle-check"></i> Complete Order
                    </button>
                    {% endif %}

                    <!-- WOW RAID BUNDLE -->
                    {% if order.order.order.game_type == 'RB' %}
                    <div class="raid-info">
                      <div class="d-flex justify-content-between">
                        <label>Bundle:</label>
                        <p>{{order.order.bundle.name}}</p>
                      </div>
                      <div class="d-flex justify-content-between">
                        <label>Loot Priority:</label>
                        <p>{{order.order.loot_priority}}</p>
                      </div>
                      <div class="d-flex justify-content-between">
                        <label>Boost Method:</label>
                        <p>{{order.order.boost_method}}</p>
                      </div>
                      <div class="d-flex justify-content-between">
                        <label>Bundle Info:</label>
                        <p></p>
                      </div>
                      <div class="d-flex justify-content-between">
                        <p>{{order.order.bundle.feature_1}}</p>
                      </div>
                      <div class="d-flex justify-content-between">
                        <p>{{order.order.bundle.feature_2}}</p>
                      </div>
                      <div class="d-flex justify-content-between">
                        <p>{{order.order.bundle.feature_3}}</p>
                      </div>
                      <div class="d-flex justify-content-between">
                        <p>{{order.order.bundle.feature_4}}</p>
                      </div>
                    </div>
                    <!-- Button trigger modal -->
                    <button type="button" class="btn complete-order-btn" data-bs-toggle="modal" data-bs-target="#staticBackdrop-{{ order.order.order.id }}">
                      <i class="fa-regular fa-circle-check"></i> Complete Order
                    </button>
                    {% endif %}

                    <!-- WOW DUNGEON BUNDLE -->
                    {% if order.order.order.game_type == 'DU' %}
                    <div class="raid-info">
                      <div class="d-flex justify-content-between">
                        <label>Keystone:</label>
                        <p>{{order.order.keystone}}</p>
                      </div>
                      <div class="d-flex justify-content-between">
                        <label>Number Of Keys:</label>
                        <p>{{order.order.keys}}</p>
                      </div>
                      <div class="d-flex justify-content-between">
                        <label>Loot Traders:</label>
                        <p>{{order.order.traders}}</p>
                      </div>
                      <div class="d-flex justify-content-between">
                        <label>Armor type:</label>
                        <p>{{order.order.traders_armor_type}}</p>
                      </div>
                      <div class="d-flex justify-content-between">
                        <label>Timed:</label>
                        <p>{{order.order.timed}}</p>
                      </div>
                      <div class="d-flex justify-content-between">
                        <label>Boost method:</label>
                        <p>{{order.order.boost_method}}</p>
                      </div>
                      {% if order.order.map_preferred == 'Specific' %}
                        {% for map_name, map_value in order.order.get_maps_as_key_value.items %}
                          {% if map_value != 0 %}
                          <div class="d-flex justify-content-between">
                            <label>{{map_name}}:</label>
                            <p>{{map_value}}</p>
                          </div>
                          {% endif %}
                        {% endfor %}
                      {% endif %}
                    </div>
                    <!-- Button trigger modal -->
                    <button type="button" class="btn complete-order-btn" data-bs-toggle="modal" data-bs-target="#staticBackdrop-{{ order.order.order.id }}">
                      <i class="fa-regular fa-circle-check"></i> Complete Order
                    </button>
                    {% endif %}
      
                    <!-- Division -->
                    {% if order.order.order.game_type == 'D' or order.order.order.game_type == 'A' %}
                      <div class="from-to d-flex justify-content-center align-items-center mt-xl-3 mt-4 p-2">
                        <div class="from d-flex justify-content-center align-items-center me-md-3 me-1">
                          {% if order.order.order.game_type == 'D' %}
                          <div>
                            <img src="{{order.order.current_rank.get_image_url}}" alt="Current Rank Image" class="current-rank-selected-img me-md-2 me-0 img-fluid" width="40" height="40">
                          </div>
                          {% elif order.order.order.game_type == 'A' and order.order.order.game_id != 13 %}
                          <div>
                            <img src="{{order.order.current_rank.get_image_url}}" alt="Current Rank Image" class="current-rank-selected-img me-md-2 me-0 img-fluid" width="40" height="40">
                          </div>
                          {% endif %}
      
                          {% if order.order.order.game.link == 'wildRift' or order.order.order.game.link == 'lol' or order.order.order.game.link == 'tft' %}
                            <p class="current-info text-capitalize mb-0">{{order.order.current_rank}} {{ order.order.current_division|romanize_division }}</p>
      
                          {% elif order.order.order.game.link == 'valorant' or order.order.order.game.link == 'rocketLeague' %}
                            <p class="current-info text-capitalize mb-0">{{order.order.current_rank}} {{ order.order.current_division|romanize_division_original }}</p>
      
                          {% elif order.order.order.game.link == 'hearthstone' and order.order.order.game_type == 'D' %}
                            <p class="current-info text-capitalize mb-0">{{order.order.current_rank}} {{ order.order.current_division|ten_romanize_division }}</p>

                          {% elif order.order.order.game.link == 'hearthstone' and order.order.order.game_type == 'A' %}
                            <p class="current-info text-capitalize mb-0">{{ order.order.current_division }} MMR</p>
      
                          {% elif order.order.order.game.link == 'hok' or order.order.order.game.link == 'pubg' or order.order.order.game.link == 'overwatch2' %}
                            <p class="current-info text-capitalize mb-0">{{order.order.current_rank}} {{ order.order.current_division|five_romanize_division }}</p>
      
                          {% elif order.order.order.game.link == 'wow' or order.order.order.game.link == 'dota2' %}
                            <p class="current-info text-capitalize mb-0">{{ order.order.current_division }} MMR</p>
  
                          {% elif order.order.order.game.link == 'csgo2' and order.order.order.game_type == 'D' %}
                            <p class="current-info text-capitalize mb-0">{{ order.order.current_rank }}</p>
      
                          {% elif order.order.order.game.link == 'csgo2' and order.order.order.game_type == 'A' %}
                            <p class="current-info text-capitalize mb-0">{{ order.order.current_division }} Premier Rank</p>
      
                          {% elif order.order.order.game.link == 'mobileLegends' and order.order.order.game_type == 'D' %}
                            <p class="current-info text-capitalize mb-0">{{order.order.current_rank}} {{ order.order.current_division|five_romanize_division }}</p>
      
                          {% endif %}
  
                        </div>
        
                        <i class="fa-solid fa-chevron-right fs-4" style="color: var(--secondary-color);"></i>
          
                        <div class="to d-flex justify-content-center align-items-center ms-md-3 ms-1">
                          {% if order.order.order.game_type == 'D' %}
                            <img src="{{order.order.desired_rank.get_image_url}}" alt="Desired Rank Image" class="desired-rank-selected-img me-md-2 me-0 img-fluid" width="40" height="40">
                          {% elif order.order.order.game_type == 'A' and order.order.order.game_id != 13 %}
                            <img src="{{order.order.desired_rank.get_image_url}}" alt="Desired Rank Image" class="desired-rank-selected-img me-md-2 me-0 img-fluid" width="40" height="40">
                          {% endif %}
      
                          {% if order.order.order.game.link == 'wildRift' or order.order.order.game.link == 'lol' or order.order.order.game.link == 'tft' %}
                            <p class="desired-info text-capitalize mb-0">{{order.order.desired_rank}} {{ order.order.desired_division|romanize_division }}</p>
      
                          {% elif order.order.order.game.link == 'valorant' or order.order.order.game.link == 'rocketLeague' %}
                            <p class="desired-info text-capitalize mb-0">{{order.order.desired_rank}} {{ order.order.desired_division|romanize_division_original }}</p>
      
                          {% elif order.order.order.game.link == 'hearthstone' and order.order.order.game_type == 'D' %}
                            <p class="desired-info text-capitalize mb-0">{{order.order.desired_rank}} {{ order.order.desired_division|ten_romanize_division }}</p>

                          {% elif order.order.order.game.link == 'hearthstone' and order.order.order.game_type == 'A' %}
                            <p class="desired-info text-capitalize mb-0">{{ order.order.desired_division }} MMR</p>
      
                          {% elif order.order.order.game.link == 'hok' or order.order.order.game.link == 'pubg' or order.order.order.game.link == 'overwatch2' %}
                            <p class="desired-info text-capitalize mb-0">{{order.order.desired_rank}} {{ order.order.desired_division|five_romanize_division }}</p>
      
                          {% elif order.order.order.game.link == 'wow' or order.order.order.game.link == 'dota2' %}
                            <p class="desired-info text-capitalize mb-0">{{ order.order.desired_division }} MMR</p>
  
                          {% elif order.order.order.game.link == 'csgo2' and order.order.order.game_type == 'D' %}
                            <p class="desired-info text-capitalize mb-0">{{ order.order.desired_rank}}</p>
      
                          {% elif order.order.order.game.link == 'csgo2' and order.order.order.game_type == 'A' %}
                            <p class="desired-info text-capitalize mb-0">{{ order.order.desired_division }} Premier Rank</p>
  
                          {% elif order.order.order.game.link == 'mobileLegends' and order.order.order.game_type == 'D' %} 
                            <p class="desired-info text-capitalize mb-0">{{ order.order.desired_rank}} {{ order.order.desired_division|five_romanize_division }}</p> 
      
                          {% endif %}
                        </div>
                      </div>
      
                      <div class="reached-info my-4 d-flex text-center flex-column justify-content-center align-items-center">
                        {% if order.order.order.id == 7 and order.order.order.game_type != 'D'  %}
                          <h4 style="font-weight: 7000;">Current Rank</h>
                        {% else %}
                          <h4 style="font-weight: 7000;">Current MMR</h>
                        {% endif %}
                        {% if order.order.order.game_type == 'D' %}
                          <div class="d-flex justify-content-center align-items-center">
                            <img src="{{order.order.reached_rank.get_image_url}}" alt="Reached Rank Image" class="reached-rank-selected-img checkout-img img-fluid d-block my-3" width="150" height="150">
                          </div>
                          {% elif order.order.order.game_type == 'A' and order.order.order.game_id != 13 %}
                          <div class="d-flex justify-content-center align-items-center">
                            <img src="{{order.order.reached_rank.get_image_url}}" alt="Reached Rank Image" class="reached-rank-selected-img checkout-img img-fluid d-block my-3" width="150" height="150">
                          </div>
                          {% endif %}
      
                        {% if order.order.order.game.link == 'wildRift' or order.order.order.game.link == 'lol' or order.order.order.game.link == 'tft' %}
                          <p class="current-info text-capitalize mb-0" style="color:#FFFFFF80;">{{order.order.reached_rank}} {{ order.order.reached_division|romanize_division }}</p>
      
                        {% elif order.order.order.game.link == 'valorant' or order.order.order.game.link == 'rocketLeague' %}
                          <p class="current-info text-capitalize mb-0" style="color:#FFFFFF80;">{{order.order.reached_rank}} {{ order.order.reached_division|romanize_division_original }}</p>
      
                        {% elif order.order.order.game.link == 'hearthstone' and order.order.order.game_type == 'D' %}
                          <p class="current-info text-capitalize mb-0" style="color:#FFFFFF80;">{{order.order.reached_rank}} {{ order.order.reached_division|ten_romanize_division }}</p>
                        
                        {% elif order.order.order.game.link == 'hearthstone' and order.order.order.game_type == 'A' %}  
                          <p class="current-info text-capitalize mb-0" style="color:#FFFFFF80;">{{ order.order.reached_division }} MMR</p>
                          
                        {% elif order.order.order.game.link == 'hok' or order.order.order.game.link == 'pubg' or order.order.order.game.link == 'overwatch2' %}
                          <p class="current-info text-capitalize mb-0" style="color:#FFFFFF80;">{{order.order.reached_rank}} {{ order.order.reached_division|five_romanize_division }}</p>
      
                        {% elif order.order.order.game.link == 'wow' or order.order.order.game.link == 'dota2' %}
                          <p class="current-info text-capitalize mb-0" style="color:#FFFFFF80;">{{ order.order.reached_division }} MMR</p>
      
                        {% elif order.order.order.game.link == 'csgo2' and order.order.order.game_type == 'D' %}
                          <p class="current-info text-capitalize mb-0" style="color:#FFFFFF80;">{{ order.order.reached_rank }}</p>
  
                        {% elif order.order.order.game.link == 'csgo2' and order.order.order.game_type == 'A' %}
                          <p class="current-info text-capitalize mb-0 mt-3" style="color:#FFFFFF80;">{{ order.order.reached_division }} Premier Rank</p>
                        
                        {% elif order.order.order.game.link == 'mobileLegends' and order.order.order.game_type == 'D' %} 
                          <p class="current-info text-capitalize mb-0 mt-3" style="color:#FFFFFF80;">{{order.order.reached_rank}} {{ order.order.reached_division|five_romanize_division }}</p> 
                        {% endif %}
                      </div>
  
                      <div class="form-update">
                        <!-- Here We Change Update Component Depend On Game -->
                        {% if order.order.order.game.pk == 1 %}
                          {% include 'wildRift/order_update.html' %}
  
                        {% elif order.order.order.game.pk == 2 %}
                        
                          {% include 'valorant/order_update.html' with valorant_ranks=valorant_ranks %}
  
                        {% elif order.order.order.game.pk == 4 %}
                          {% include 'leagueOfLegends/order_update.html' with lol_ranks=lol_ranks %}
  
                        {% elif order.order.order.game.pk == 3 %}
                          {% include 'pubg/order_update.html' with pubg_ranks=pubg_ranks %}
  
                        {% elif order.order.order.game.pk == 5 %}
                          {% include 'tft/order_update.html' with tft_ranks=tft_ranks %}
  
                        {% elif order.order.order.game.pk == 7 and order.order.order.game_type == 'D' %}
                          {% include 'hearthstone/order_update.html' with hearthstone_ranks=hearthstone_ranks %}

                        {% elif order.order.order.game.pk == 7 and order.order.order.game_type == 'A' %}
                          {% include 'hearthstone/order_update_mmr.html' with hearthstone_ranks=hearthstone_ranks %}
  
                        {% elif order.order.order.game.pk == 9 %}
                          {% include 'rocketLeague/order_update.html' with rocketLeague_ranks=rocketLeague_ranks %}
                        
                        {% elif order.order.order.game.pk == 11 %}
                          {% include 'honorOfKings/order_update.html' with hok_ranks=hok_ranks %} 
  
                        {% elif order.order.order.game.pk == 6 %}
                          {% include 'wow/order_update.html' %}
  
                        {% elif order.order.order.game.pk == 10 %}
                          {% include 'dota2/order_update.html' %}
  
                        {% elif order.order.order.game.pk == 12 %}
                          {% include 'overwatch2/order_update.html' %}
  
                        {% elif order.order.order.game.pk == 13 %}
                          {% include 'csgo2/order_update.html' %}
                        
                        {% elif order.order.order.game.pk == 8 %}
                          {% include 'mobileLegends/order_update.html' %}
                          
                        {% endif %}
                      </div>
  
                      {% if order.order.reached_rank.id > order.order.desired_rank.id %}
                        <!-- Button trigger modal -->
                        <button type="button" class="btn complete-order-btn" data-bs-toggle="modal" data-bs-target="#staticBackdrop-{{ order.order.order.id }}">
                          <i class="fa-regular fa-circle-check"></i> Complete Order
                        </button>
                      {% elif order.order.reached_rank.id == order.order.desired_rank.id and order.order.reached_division >= order.order.desired_division  %}
                        <!-- Button trigger modal -->
                        <button type="button" class="btn complete-order-btn" data-bs-toggle="modal" data-bs-target="#staticBackdrop-{{ order.order.order.id }}">
                          <i class="fa-regular fa-circle-check"></i> Complete Order
                        </button>
                      {% endif %}
                    {% elif order.order.order.game_type == 'P' %}
                      <div class="from-to d-flex justify-content-center align-items-center mt-xl-3 mt-4 p-2">
                        <div class="from d-flex justify-content-center align-items-center me-md-3 me-1">
                          <div>
                            <img src="{{order.order.last_rank.get_image_url}}" alt="Current Rank Image" class="current-rank-selected-img me-md-2 me-0 img-fluid" width="40" height="40">
                          </div>
                          {% if order.order.order.game_id == 10 %}
                            <p class="current-info text-capitalize mb-0">{{order.order.last_division}} MMR</p>
                          {% else %}
                            <p class="current-info text-capitalize mb-0">{{order.order.last_rank.rank_name}}</p>
                          {% endif %}
      
                        </div>
      
                        <i class="fa-solid fa-chevron-right fs-4" style="color: var(--secondary-color);"></i>
          
                        <div class="to d-flex justify-content-center align-items-center ms-md-3 ms-1">
      
                          <p class="num-info text-capitalize mb-0">{{order.order.number_of_match}} Matches</p>
      
                        </div>
                      </div>
      
                      <div class="reached-info my-4 d-flex text-center flex-column justify-content-center align-items-center">
                        <h4 style="font-weight: 7000;">Last Rank</h>
                        <div class="d-block my-3">
                          <img src="{{order.order.last_rank.get_image_url}}" alt="Last Rank Image" class="reached-rank-selected-img img-fluid" width="150" height="150">
                        </div>
                        {% if order.order.order.game_id == 10 %}
                          <p class="current-info text-capitalize mb-0" style="color:#FFFFFF80;">{{order.order.last_division}} MMR</p>
                        {% else %}
                          <p class="current-info text-capitalize mb-0" style="color:#FFFFFF80;">{{order.order.last_rank.rank_name}}</p>
                        {% endif %}
                      </div>
                      <!-- [2, 4, 5, 8, 9, 10, 12] -->
  
                      {% if order.order.order.game_id == 2 %}
                        {% include 'valorant/order_update_wins.html'%}
  
                      {% elif order.order.order.game_id == 4 %}  
                        {% include 'leagueOfLegends/order_update_wins.html'%}
  
                      {% elif order.order.order.game_id == 5 %}  
                      {% include 'tft/order_update_wins.html' %}
  
                      {% elif order.order.order.game_id == 8 %}  
                      {% include 'mobileLegends/order_update_wins.html' %}
  
                      {% elif order.order.order.game_id == 9 %}  
                      {% include 'rocketLeague/order_update_wins.html' %}
  
                      {% elif order.order.order.game_id == 10 %}  
                      {% include 'dota2/order_update_wins.html' %}
  
                      {% elif order.order.order.game_id == 12 %}  
                      {% include 'overwatch2/order_update_wins.html' %}
  
                      {% endif %}
  
                      <!-- Button trigger modal -->
                      
                      <p class="mt-2 text-warning">Current Wins is: {{order.order.order.wins_number}} win</p>
                      <button type="button" class="btn complete-order-btn" data-bs-toggle="modal" data-bs-target="#staticBackdrop-{{ order.order.order.id }}">
                        <i class="fa-regular fa-circle-check"></i> Complete Order
                      </button>
                    {% elif order.order.order.game_type == 'S' %}
                      <div class="from-to d-flex justify-content-center align-items-center mt-xl-3 mt-4 p-2">
                        <div class="from d-flex justify-content-center align-items-center me-md-3 me-1">
                        
                          <img src="{{order.order.current_rank.get_image_url}}" alt="Current Rank Image" class="current-rank-selected-img me-md-2 me-0 img-fluid" width="40" height="40">
                          
                          <p class="current-info text-capitalize mb-0">{{order.order.current_rank.rank_name}}</p>
      
                        </div>
      
                        <i class="fa-solid fa-chevron-right fs-4" style="color: var(--secondary-color);"></i>
          
                        <div class="to d-flex justify-content-center align-items-center ms-md-3 ms-1">
      
                          <p class="num-info text-capitalize mb-0">{{order.order.number_of_wins}} Wins</p>
      
                        </div>
                      </div>
      
                      <div class="reached-info my-4 d-flex text-center flex-column justify-content-center align-items-center">
                        <h4 style="font-weight: 7000;">Current Rank</h>
                          <div class="d-flex justify-content-center align-items-center">
                            <img src="{{order.order.current_rank.get_image_url}}" alt="Last Rank Image" class="reached-rank-selected-img img-fluid d-block my-3" width="150" height="150">
                          </div>
                          <p class="current-info text-capitalize mb-0" style="color:#FFFFFF80;">{{order.order.current_rank.rank_name}}</p>
                      </div>
                      {% if order.order.order.game_id == 9 %}  
                      {% include 'rocketLeague/order_update_wins.html' %}
                      {% endif %}
                      <!-- Button trigger modal -->
                      <button type="button" class="btn complete-order-btn" data-bs-toggle="modal" data-bs-target="#staticBackdrop-{{ order.order.order.id }}">
                        <i class="fa-regular fa-circle-check"></i> Complete Order
                      </button>
                    {% elif order.order.order.game_type == 'T' %}
                      <div class="from-to d-flex justify-content-center align-items-center mt-xl-3 mt-4 p-2">
                        <div class="from d-flex justify-content-center align-items-center me-md-3 me-1">
                        
                          <img src="{{order.order.current_league.get_image_url}}" alt="Current Rank Image" class="current-rank-selected-img me-md-2 me-0 img-fluid" width="40" height="40">
                          
                          <p class="current-info text-capitalize mb-0">{{order.order.current_league.rank_name}}</p>
      
                        </div>
                      </div>
      
                      <div class="reached-info my-4 d-flex text-center flex-column justify-content-center align-items-center">
                        <h4 style="font-weight: 7000;">Current League</h>
                        
                        <img src="{{order.order.current_league.get_image_url}}" alt="Last Rank Image" class="reached-rank-selected-img img-fluid d-block my-3" width="150" height="150">
      
                        <p class="current-info text-capitalize mb-0" style="color:#FFFFFF80;">{{order.order.current_league.rank_name}}</p>
                      </div>
  
                      <!-- Button trigger modal -->
                      <button type="button" class="btn complete-order-btn" data-bs-toggle="modal" data-bs-target="#staticBackdrop-{{ order.order.order.id }}">
                        <i class="fa-regular fa-circle-check"></i> Complete Order
                      </button>
                    {% elif order.order.order.game_type == 'F' %}
                      <div class="from-to d-flex justify-content-center align-items-center mt-xl-3 mt-4 p-2">
                        <div class="from d-flex justify-content-center align-items-center me-md-3 me-1">
      
                          <p class="current-info text-capitalize mb-0">Level {{order.order.current_level}}</p>
      
                        </div>
      
                        <i class="fa-solid fa-chevron-right fs-4" style="color: var(--secondary-color);"></i>
          
                        <div class="to d-flex justify-content-center align-items-center ms-md-3 ms-1">
      
                          <p class="desired-info text-capitalize mb-0">Level {{order.order.desired_level}}</p>
      
                        </div>
                      </div>
      
                      <div class="reached-info my-4 d-flex text-center flex-column justify-content-center align-items-center">
                        <h4 style="font-weight: 7000;">Current Level</h>
      
                        <p class="current-info text-capitalize mb-0 mt-3" style="color:#FFFFFF80;">Level {{order.order.current_level}}<p>
                      </div>
  
                      <!-- Button trigger modal -->
                      <button type="button" class="btn complete-order-btn" data-bs-toggle="modal" data-bs-target="#staticBackdrop-{{ order.order.order.id }}">
                        <i class="fa-regular fa-circle-check"></i> Complete Order
                      </button>
                    {% endif %}
                    
                    <!-- Complete Order Modal -->
                    <div class="modal custom-modal modal-lg fade" id="staticBackdrop-{{ order.order.order.id }}" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
                      <div class="modal-dialog">
                        <div class="modal-content">
                          <div class="modal-header">
                            <h1 class="modal-title fs-5" id="staticBackdropLabel">Upload Complete Image</h1>
                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"><i class="fa-solid fa-xmark fs-3"></i></button>
                          </div>
                          <div class="modal-body">
                            <p id="image-over-size-error" class="text-danger"></p>
                            <form action="{% url 'order.upload.image' %}" method="POST" enctype="multipart/form-data" id="complete-image-upload" class="no-disabled-form">
                              {% csrf_token %}
                              {% if error %} <p class="error text-danger">{{error}}</p> {% endif %}
                              <input type="hidden" name="order_id" value="{{ order.order.order.id }}">
  
                              <!-- Image preview -->
                              <div class="d-flex justify-content-center align-items-center">
                                <img src="#" alt="Preview" class="image-preview" style="max-width: 100%; max-height: 400px; display: none; margin-bottom: 3rem;">
                              </div>
  
                              <label for="images" class="drop-container dropcontainer">
                                <span class="drop-title">Drop files here</span>
                                or
                                <input type="file" name="finish_image" class="finish_image" required>
                              </label>
  
                              <div class="text-end">
                                <button type="submit" class="btn complete-order-btn my-3">Submit</button>
                              </div>
                            </form>
  
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>

              </div>

              <!-- --------------------------- Chat --------------------------- -->
              <div class="chat-container col-xl-8 col-12">

                <div class="chat-header py-4 px-md-5 px-3">

                  <div class="title p-2">
                    <p class="mb-0">Chat with the player</p>
                  </div>
                  
                  <div class="customer-info d-flex flex-wrap justify-content-between align-items-center pt-4">
 
                    <div class="text ms-md-4 ms-0">
                      <h3>{{order.order.order.customer.username}}</h3>
                      {% if order.order.customer.is_online %}
                        <p class="status status-online mb-0 mt-2 state{{order.order.order.customer.id}}-id" id="state{{order.order.order.id}}-id"><span class="online"></span>Online</p>
                      {% else %}
                        <p class="status status-offline mb-0 mt-2 state{{order.order.order.customer.id}}-id" id="state{{order.order.order.id}}-id"><span class="offline"></span>Last seen {{ order.order.order.customer.last_online|custom_timesince }}</p>
                      {% endif %}
                    </div>

                    {% if order.order.order.game.pk == 1 or  order.order.order.game.pk == 2 or  order.order.order.game.pk == 4 %}
                      <div class="champions d-flex justify-content-between align-items-center">
                        {% for champion in order.order.champions.all %}
                          <img src="{{champion.get_image_url}}" class="champion me-2" alt="{{champion.name}}" width="48" height="48">
                        {% endfor %}
                      </div>
                    {% endif %}

                    <div class="avalible-to-play flex-end">
                      <button style="background-color: #F26E3E;" class="btn scrollBtn">Update progress</button>
                      <button id="{{order.order.order.id}}" class="btn available-btn">Available to Play</button>
                    </div>
                  </div>
                  
                </div>

                <!-- Chat Customer Container -->
                <div id="chat-customer-container" class="chat-customer-container py-4 px-md-5 px-2">
                  <!-- Messages -->
                  <div class="chat-messages">
    
                    <div id="customer-messages-container-order-{{order.order.order.id}}" class="customer-messages-container">
                      {% if order.messages %}
                        {% regroup order.messages by created_on|format_date as grouped_messages %}
                        <div class="chatbox there-is-messages" id="chatbox-order-{{order.order.order.id}}">
                          {% for group in grouped_messages %}
    
                            <p class="day-date">{{ group.grouper }}</p>
    
                            {% for message in group.list %}
                              <div
                                class="chat-message {% if message.user == request.user %}user-message{% else %}{% if message.msg_type == 2 %}tip-message{% elif message.msg_type == 3 %}changes-message{% elif message.msg_type == 4 %}from-admin-message{% else %}customer-message{% endif %}{% endif %}" style="background-color: transparent !important;">
                                {% if message.msg_type == 2 %}
                            
                                  <p class="message success-message mb-0 me-1"><i class="fa-solid fa-circle-info me-1"></i> {{ message.content }} &#127881;</p>

                                  <p class="message-time mb-0"> {{message.created_on|date:"g:i A"}} </p>
    
                                {% elif message.msg_type == 3 %}
    
                                  <p class="message info-message mb-0 me-1"><i class="fa-solid fa-circle-info ms-1"></i> {{ message.content }}</p>
                                  
                                  <p class="message-time mb-0"> {{message.created_on|date:"g:i A"}} </p>
    
                                {% else %}
                                  {% if request.user != message.user %}

                                    {% if message.msg_type == 4 %}
                                      <p class="message-time mb-0"> {{message.created_on|date:"g:i A"}} </p>
      
                                      <p class="message mb-0  ms-2">{{ message.content }}</p>

                                      <div class="image ms-3">
                                        {% if message.user.booster.get_image_url %}
                                          <img src="{{message.user.booster.get_image_url}}" alt="" width="40" height="40">
                                        {% else %}
                                          <img src="{% static 'base/images/no_profile_image.png' %}" alt="" width="40" height="40">
                                        {% endif %}
                                      </div>
                                    {% else %}
                                    
                                      <p class="message mb-0">{{ message.content }}</p>
                                      
                                      <p class="message-time mb-0 ms-2"> {{message.created_on|date:"g:i A"}} </p>
                                    {% endif %}
    
                                  {% else %}

                                    <p class="message-time mb-0 me-2"> {{message.created_on|date:"g:i A"}} </p>
    
                                    <p class="message mb-0">{{ message.content }}</p>

                                    <div class="image ms-3">
                                      {% if message.user.booster.get_image_url %}
                                        <img src="{{message.user.booster.get_image_url}}" alt="" width="40" height="40">
                                      {% else %}
                                        <img src="{% static 'base/images/no_profile_image.png' %}" alt="" width="40" height="40">
                                      {% endif %}
                                    </div>
                                  {% endif %}
                                {% endif %}
                              </div>
                            {% endfor %}
                          {% endfor %}
                        </div>
                      {% else %}
                        <div class="booster-chatbox there-is-not-messages" id="booster-chatbox"></div>
                        <b class="no-messages">Start Chat With Your Customer</b>
                      {% endif %}
                    </div>
    
                  </div>
    
                  <!-- Form -->
                  <div class="chat-from">
                    <form id='chat-form-order-{{order.order.order.id}}'>
                      {% if order.room.active %}
                        <div class="message-send-container">
                          <input class="form-control message-input" placeholder="Type your message.." id="message-input-order-{{order.order.order.id}}" type="text" required>
                          <button class="btn sent-btn" id="message-submit-order-{{order.order.order.id}}" type="button" value="Send">Send</button>
                        </div>
                      {% else %}
                        <div class="booster-chatbox fw-bold" id="booster-chatbox">
                          <div class="booster-chat-message text-center">Closed Chat</div>
                        </div>
                      {% endif %}
                    </form>
                  </div>
                </div>
              </div>
              
              <!-- --------------------------- Progress & Drop --------------------------- -->
              {% if order.order.order.game_type == 'D' or order.order.order.game_type == 'A' %}
                <div class="col-12 progress-drop-parent">
                  <div class="progress-drop-container">

                    <div class="row row-cols-xl-3 row-cols-md-2 row-cols-1 gy-3 justify-content-xl-between justify-content-center align-items-center">

                      <div class="process">
                        <p class="mb-4">Progress: <span class="ms-3">{{order.percentage}}%</span></p>
                        <div class="progress mb-3">
                          <div class="progress-bar" style="width: {{ order.percentage }}%;"  role="progressbar" aria-valuenow="{{ order.percentage }}" aria-valuemin="0" aria-valuemax="100">
                          </div>
                        </div>

                        <div class="steps-conatiner">
                          <div class="step">0%</div>
                          <div class="step">50%</div>
                          <div class="step">100%</div>
                        </div>
                      </div>
                      
                      <div class="payout-progress">
                        <p class="mb-4">Payout Progress: <span span class="ms-3">${{order.now_price|floatformat:2}}</span></p>
                        <div class="progress mb-3">
                          <div class="progress-bar" style="width: {{ order.percentage }}%;" aria-valuenow="{{ order.percentage }}" aria-valuemin="0" aria-valuemax="100">
                          </div>
                        </div>

                        <div class="steps-conatiner">
                          <div class="step">$0</div>
                          <div class="step">${{ order.half_price }}</div>
                          <div class="step">${{order.order.order.actual_price}}</div>
                        </div>
                      </div>

                      {% if order.percentage < 80 %}
                        <button id="{{order.order.order.id }}" type="button" class="drop-order-btn btn custom-btn filled" data-toggle="modal" data-target="#dropOrderModal">Drop Order</button>
                      {% endif %}
                    </div>
      
                  </div>
                </div>
              {% endif %}
            </div>
          {% endfor %}
        </div>
      </div>


    </div>
  </div>

</div>


<!-- Modal Structure -->
<div class="modal fade" id="dropOrderModal" tabindex="-1" role="dialog" aria-labelledby="dropOrderModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered" role="document">
    <div class="modal-content custom-modal">
      <div class="modal-header">
        <h5 class="modal-title" id="dropOrderModalLabel">Confirm Drop Order</h5>
      </div>
      <div class="modal-body">
        Are you sure you want to drop this order?
        <p class="text-danger small"><span><strong>NOTE: </strong></span>we limit drop order to one every month</p>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
        <form id="dropform" action="" method="POST" class="drop-order-form no-disabled-form" data-id="{{order.order.order.id }}">
          {% csrf_token %}
          <button type="submit" class="btn btn-danger">Yes, Drop Order</button>
        </form>
      </div>
    </div>
  </div>
</div>


{% endblock %}
{% block script %}
<script>
  var staticUrl = "{% static 'base/images/no_profile_image.png' %}";
  var currentSocket = null
</script>
<!-- SWIPER JS -->
<script src="{% static 'swiper/js/swiper-bundle.min.js' %}"></script>

<!-- Bootstrap JS and dependencies (jQuery and Popper.js) -->
<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>

<!-- OUR SCRIPTS -->
<script src='{% static "accounts/js/readmore.js" %}'></script>
<script src="{% static 'booster/js/toggle-roles.js' %}"></script>
<script src="{% static 'booster/js/alert-customer.js' %}"></script>
<script src="{% static 'booster/js/booster-order.js' %}"></script>
<script src="{% static 'booster/js/image-size.js' %}"></script>
<script src="{% static 'booster/js/orders-swiper.js' %}"></script>
<script src="https://cdn.jsdelivr.net/npm/toastify-js"></script>
<script src="{% static 'base/js/mails.js' %}"></script>

<script>
  document.addEventListener('DOMContentLoaded', function() {

    const drop_btns = document.querySelectorAll('.drop-order-btn');
    const drop_form = document.getElementById('dropform');
    const drop_url = '/booster/drop-order/'

    drop_btns.forEach(btn => {
        btn.addEventListener('click', () => {
          drop_form.action = drop_url + btn.id
        });
    });

    const copyIcons = document.querySelectorAll('.copy-icon');

    copyIcons.forEach(icon => {
      icon.addEventListener('click', function() {
        const targetSelector = this.getAttribute('data-target');
        const targetElement = document.querySelector(targetSelector);
        
        if (targetElement) {
          const textToCopy = targetElement.textContent;

          // Attempt to copy using Clipboard API
          if (navigator.clipboard) {
            navigator.clipboard.writeText(textToCopy).then(() => {
              Toastify({
                text: 'Copied',
                duration: 3000,
                close: true,
                gravity: 'top',
                position: 'right',
                backgroundColor: '#4CAF50',
              }).showToast();
            }).catch(err => {
              console.error('Failed to copy text: ', err);
              // Fallback for older browsers
              fallbackCopyTextToClipboard(textToCopy);
            });
          } else {
            // Fallback for browsers that don't support the Clipboard API
            fallbackCopyTextToClipboard(textToCopy);
          }
        }
      });
    });

    function fallbackCopyTextToClipboard(text) {
      const textArea = document.createElement("textarea");
      textArea.value = text;
      textArea.style.position = "fixed";  
      document.body.appendChild(textArea);
      textArea.focus();
      textArea.select();

      try {
        const successful = document.execCommand('copy');
        const msg = successful ? 'Copied' : 'Error: unable to copy';
        Toastify({
          text: msg,
          duration: 3000,
          close: true,
          gravity: 'top',
          position: 'right',
          backgroundColor: '#4CAF50',
        }).showToast();
      } catch (err) {
        console.error('Fallback: Unable to copy text', err);
      }

      document.body.removeChild(textArea);
    }
  });
</script>
<script>
  function scrollToTarget() {
      window.scrollTo({
          top: 1930, 
          behavior: 'smooth' 
      });
  }

  document.querySelectorAll('.scrollBtn').forEach(button => {
      button.addEventListener('click', scrollToTarget);
  });
</script>

{% endblock %}